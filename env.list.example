# Example environment configuration for patient pipeline
# Goal: RUN NOW with LangChain + RAG enabled.

# -------------------------
# AWS / Region
# -------------------------
AWS_REGION=us-east-1

# -------------------------
# Input and output S3 locations
# -------------------------
INPUT_S3=s3://your-bucket/Input/your-input-file.csv
OUTPUT_S3=s3://your-bucket/Output/your-output-file.csv

# Audit logging (where the run summary JSON will be stored)
AUDIT_BUCKET=your-bucket-name
AUDIT_PREFIX=audit_logs

# -------------------------
# Email configuration (SES)
# -------------------------
EMAIL_FROM=sender@example.com
EMAIL_TO=recipient@example.com
EMAIL_SUBJECT=High-Risk Patient Report

# -------------------------
# Pipeline parameters
# -------------------------
THRESHOLD=0.94
START_DATE=2024-05-01
END_DATE=2024-05-07

# Optional physician filter (comma-separated). Leave blank to include all.
PHYSICIAN_ID_LIST=1

# Optional: cap number of notes processed (0 = no cap)
MAX_NOTES=0

# CSV streaming chunk size
CSV_CHUNK_ROWS=5000

# Temp output file path inside container (must be writable)
OUTPUT_TMP=/tmp/output.csv

# Prefer streaming via boto3 (safe in Fargate). Set true only if you installed s3fs.
USE_S3FS=false

# -------------------------
# Safety / Debug toggles
# -------------------------
LLM_DISABLED=false
DRY_RUN_EMAIL=false

# -------------------------
# OpenAI / LLM settings (shared by BOTH direct OpenAI + LangChain)
# -------------------------
OPENAI_MODEL=gpt-4o-mini
OPENAI_TEMPERATURE=0
OPENAI_MAX_TOKENS=800
OPENAI_TIMEOUT_SEC=60

# Optional throttle between calls (seconds)
OPENAI_THROTTLE_SEC=0

# -------------------------
# LangChain wedge (ON)
# -------------------------
USE_LANGCHAIN=true

# -------------------------
# RAG (ON)
# -------------------------
# Keep this ON because many build_index_from_env() implementations check it.
RAG_ENABLED=true

# Knowledge base path used by src.rag_tfidf.build_index_from_env()
# If your RAG implementation reads the KB from S3 directly, keep the s3:// form.
# If it expects a local file, mount/copy it into the image and change this path accordingly.
RAG_KB_PATH=s3://your-bucket/Input/clinical_kb.csv

# Retrieval settings
RAG_TOP_K=4
RAG_MAX_CHARS=2500
RAG_AUDIT_MAX_CHARS=1200
